<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Poznej &amp; Hraj ‚Äì Seznamovac√≠ hern√≠ veƒçery</title>
    <meta
      name="description"
      content="Poznej &amp; Hraj je modern√≠ platforma pro organizov√°n√≠ seznamovac√≠ch hern√≠ch veƒçer≈Ø, rezervace m√≠st, sd√≠len√≠ fotek a spr√°vu recenz√≠."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: dark;
        --bg: #05030d;
        --bg-alt: #0a0720;
        --surface: rgba(14, 10, 35, 0.85);
        --surface-solid: #120b32;
        --primary: #a855f7;
        --primary-soft: rgba(168, 85, 247, 0.25);
        --secondary: #38bdf8;
        --accent: #f472b6;
        --text: #f5f5ff;
        --muted: #a5b4fc;
        --success: #22c55e;
        --warning: #facc15;
        font-size: 16px;
      }

      * {
        box-sizing: border-box;
      }

      ::selection {
        background: var(--accent);
        color: var(--bg);
      }

      body {
        margin: 0;
        font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, rgba(88, 28, 135, 0.35), transparent 55%),
          radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.25), transparent 60%),
          radial-gradient(circle at 80% 70%, rgba(244, 114, 182, 0.25), transparent 60%),
          var(--bg);
        color: var(--text);
        min-height: 100vh;
        scroll-behavior: smooth;
      }

      h1,
      h2,
      h3,
      h4 {
        font-weight: 600;
        letter-spacing: 0.01em;
        margin: 0 0 0.5rem;
      }

      p {
        margin: 0 0 1rem;
        color: var(--muted);
      }

      a {
        color: inherit;
      }

      header.hero {
        padding: clamp(2rem, 6vw, 4rem) clamp(1.25rem, 6vw, 6rem) 4rem;
        background: linear-gradient(120deg, rgba(168, 85, 247, 0.22), transparent 65%),
          linear-gradient(300deg, rgba(56, 189, 248, 0.18), transparent 70%);
        position: relative;
        overflow: hidden;
      }

      header.hero::after {
        content: "";
        position: absolute;
        inset: 30% -20% -30% 55%;
        background: radial-gradient(circle, rgba(56, 189, 248, 0.35), transparent 65%);
        filter: blur(90px);
        opacity: 0.9;
      }

      nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        position: relative;
        z-index: 2;
      }

      .logo {
        font-weight: 700;
        font-size: 1.5rem;
        color: var(--text);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .logo span {
        display: inline-flex;
        width: 0.5rem;
        height: 0.5rem;
        border-radius: 50%;
        background: linear-gradient(120deg, var(--primary), var(--secondary));
        box-shadow: 0 0 10px rgba(168, 85, 247, 0.8);
      }

      .nav-links {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        align-items: center;
        gap: clamp(0.5rem, 2vw, 1.5rem);
      }

      .nav-links a {
        text-decoration: none;
        padding: 0.35rem 0.6rem;
        border-radius: 999px;
        font-size: 0.95rem;
        color: var(--muted);
        transition: color 0.2s ease, background 0.2s ease;
      }

      .nav-links a:hover,
      .nav-links a:focus-visible {
        color: var(--text);
        background: rgba(255, 255, 255, 0.08);
      }

      .hero-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: clamp(1.5rem, 5vw, 3rem);
        margin-top: clamp(2rem, 6vw, 4rem);
        position: relative;
        z-index: 2;
      }

      .hero-content h1 {
        font-size: clamp(2.5rem, 6vw, 3.8rem);
        line-height: 1.1;
        margin-bottom: 1rem;
      }

      .hero-lede {
        font-size: clamp(1rem, 2.5vw, 1.2rem);
      }

      .hero-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin: 1.25rem 0 2rem;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.45rem 0.85rem;
        border-radius: 999px;
        background: rgba(168, 85, 247, 0.18);
        color: var(--text);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .primary-btn,
      button.primary-btn {
        padding: 0.75rem 1.6rem;
        border-radius: 999px;
        border: none;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        color: var(--text);
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        box-shadow: 0 0 30px rgba(168, 85, 247, 0.35);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .primary-btn:hover,
      .primary-btn:focus-visible {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 15px 35px rgba(56, 189, 248, 0.3);
      }

      .secondary-btn {
        padding: 0.65rem 1.1rem;
        border-radius: 12px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(15, 23, 42, 0.6);
        color: var(--muted);
        font-weight: 500;
        cursor: pointer;
        transition: border 0.2s ease, transform 0.2s ease;
      }

      .secondary-btn:hover,
      .secondary-btn:focus-visible {
        border-color: rgba(148, 163, 184, 0.6);
        transform: translateY(-2px);
      }

      main {
        padding: clamp(2rem, 4vw, 4rem) clamp(1.2rem, 6vw, 6rem) 6rem;
        display: grid;
        gap: clamp(3rem, 6vw, 5rem);
      }

      section {
        position: relative;
        z-index: 1;
      }

      .section-heading {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .section-heading h2 {
        font-size: clamp(1.8rem, 4vw, 2.4rem);
      }

      .section-heading p {
        max-width: 560px;
      }

      .glass-panel {
        background: var(--surface);
        border: 1px solid rgba(148, 163, 184, 0.12);
        border-radius: 24px;
        padding: clamp(1.2rem, 3vw, 2rem);
        backdrop-filter: blur(24px);
        box-shadow: 0 25px 60px rgba(8, 47, 73, 0.25);
      }

      .events-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: clamp(1.5rem, 3vw, 2rem);
      }

      .event-card {
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 0.85rem;
        min-height: 100%;
        border-radius: 20px;
        padding: 1.5rem;
        background: linear-gradient(160deg, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.45));
        border: 1px solid rgba(168, 85, 247, 0.08);
        box-shadow: 0 20px 45px rgba(76, 29, 149, 0.25);
        transition: transform 0.2s ease, border 0.3s ease;
      }

      .event-card:hover {
        transform: translateY(-6px);
        border-color: rgba(168, 85, 247, 0.22);
      }

      .event-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem 0.85rem;
        color: var(--muted);
        font-size: 0.85rem;
      }

      .event-meta span {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.25rem 0.65rem;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.12);
      }

      .event-availability {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        font-weight: 500;
        color: var(--secondary);
      }

      .event-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-top: auto;
      }

      .reservation-section {
        display: grid;
        gap: clamp(1.5rem, 3vw, 2.5rem);
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        align-items: start;
      }

      form {
        display: grid;
        gap: 1rem;
      }

      label {
        display: grid;
        gap: 0.35rem;
        font-weight: 500;
      }

      input,
      select,
      textarea {
        font: inherit;
        padding: 0.75rem 0.9rem;
        border-radius: 14px;
        border: 1px solid rgba(148, 163, 184, 0.22);
        background: rgba(15, 23, 42, 0.5);
        color: var(--text);
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }

      input:focus-visible,
      select:focus-visible,
      textarea:focus-visible {
        outline: none;
        border-color: rgba(56, 189, 248, 0.6);
        box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.15);
      }

      textarea {
        resize: vertical;
        min-height: 110px;
      }

      .status-message {
        padding: 0.75rem 1rem;
        border-radius: 16px;
        font-size: 0.95rem;
        line-height: 1.4;
        display: none;
      }

      .status-message.success {
        display: block;
        background: rgba(34, 197, 94, 0.15);
        border: 1px solid rgba(34, 197, 94, 0.35);
        color: #bbf7d0;
      }

      .status-message.error {
        display: block;
        background: rgba(248, 113, 113, 0.16);
        border: 1px solid rgba(248, 113, 113, 0.4);
        color: #fecaca;
      }

      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 0.9rem;
      }

      .gallery-item {
        position: relative;
        overflow: hidden;
        border-radius: 18px;
        border: 1px solid rgba(168, 85, 247, 0.15);
        aspect-ratio: 1 / 1;
        cursor: pointer;
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
      }

      .gallery-item:hover img {
        transform: scale(1.08);
      }

      .lightbox {
        position: fixed;
        inset: 0;
        background: rgba(2, 6, 23, 0.92);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        z-index: 50;
      }

      .lightbox.active {
        display: flex;
      }

      .lightbox img {
        max-width: min(90vw, 1000px);
        max-height: 80vh;
        border-radius: 24px;
        box-shadow: 0 40px 120px rgba(76, 29, 149, 0.65);
      }

      .lightbox button {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        background: rgba(15, 23, 42, 0.75);
        border: none;
        color: var(--text);
        font-size: 2rem;
        cursor: pointer;
        border-radius: 50%;
        width: 3rem;
        height: 3rem;
      }

      .poll-options {
        display: grid;
        gap: 1rem;
        margin: 1rem 0 1.5rem;
      }

      .poll-option {
        display: grid;
        gap: 0.45rem;
      }

      .poll-option label {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        cursor: pointer;
      }

      .poll-progress {
        position: relative;
        height: 8px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.2);
        overflow: hidden;
      }

      .poll-progress span {
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, var(--secondary), var(--accent));
        transform-origin: left;
        transition: transform 0.4s ease;
      }

      .reviews-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: clamp(1.2rem, 3vw, 2rem);
      }

      .review-card {
        background: rgba(15, 23, 42, 0.7);
        border-radius: 20px;
        padding: 1.5rem;
        border: 1px solid rgba(56, 189, 248, 0.12);
        display: grid;
        gap: 0.75rem;
        min-height: 220px;
      }

      .review-stars {
        color: #fde68a;
        font-size: 1.05rem;
        letter-spacing: 0.15rem;
      }

      .review-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.5rem;
        color: var(--muted);
        font-size: 0.85rem;
      }

      .ig-section {
        text-align: center;
        background: linear-gradient(160deg, rgba(15, 23, 42, 0.88), rgba(5, 3, 13, 0.7));
        border-radius: 28px;
        padding: clamp(1.5rem, 5vw, 2.5rem);
        border: 1px solid rgba(244, 114, 182, 0.2);
        box-shadow: 0 30px 75px rgba(236, 72, 153, 0.2);
      }

      .ig-icons {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        font-size: 1.8rem;
        margin: 1rem 0;
        color: var(--accent);
      }

      .photo-marquee {
        overflow: hidden;
        border-radius: 24px;
        border: 1px solid rgba(148, 163, 184, 0.12);
        background: rgba(15, 23, 42, 0.6);
      }

      .marquee-track {
        display: flex;
        gap: 1rem;
        width: max-content;
        animation: marquee 28s linear infinite;
      }

      .marquee-track img {
        height: 120px;
        width: 200px;
        object-fit: cover;
        border-radius: 16px;
        filter: saturate(1.2) brightness(0.95);
      }

      @keyframes marquee {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(-50%);
        }
      }

      .admin-access {
        display: inline-flex;
        align-items: center;
        gap: 0.45rem;
        border: 1px dashed rgba(148, 163, 184, 0.3);
        padding: 0.55rem 0.9rem;
        border-radius: 12px;
        cursor: pointer;
        color: rgba(244, 114, 182, 0.85);
        transition: border 0.2s ease, color 0.2s ease;
      }

      .admin-access:hover {
        border-color: rgba(244, 114, 182, 0.6);
        color: var(--text);
      }

      .admin-panel {
        display: none;
        flex-direction: column;
        gap: 2rem;
      }

      .admin-panel.active {
        display: flex;
      }

      .admin-sections {
        display: grid;
        gap: 2rem;
      }

      .admin-group {
        display: grid;
        gap: 1rem;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem;
      }

      th,
      td {
        padding: 0.65rem 0.75rem;
        border-bottom: 1px solid rgba(148, 163, 184, 0.15);
        text-align: left;
      }

      tr:last-child td {
        border-bottom: none;
      }

      footer {
        padding: 3rem 1.5rem;
        text-align: center;
        color: var(--muted);
        background: rgba(5, 3, 13, 0.85);
      }

      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(2, 6, 23, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 1.5rem;
        z-index: 40;
      }

      .modal-overlay.active {
        display: flex;
      }

      .modal {
        width: min(420px, 100%);
        background: rgba(15, 23, 42, 0.92);
        border-radius: 22px;
        padding: 2rem;
        border: 1px solid rgba(148, 163, 184, 0.18);
        display: grid;
        gap: 1rem;
      }

      .modal header {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .modal header h3 {
        margin: 0;
        font-size: 1.4rem;
      }

      .close-btn {
        background: none;
        border: none;
        color: var(--muted);
        font-size: 1.6rem;
        cursor: pointer;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        font-size: 0.8rem;
        color: var(--muted);
      }

      .chips span {
        padding: 0.2rem 0.6rem;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.05);
      }

      .empty-state {
        text-align: center;
        padding: 1rem;
        color: var(--muted);
        font-size: 0.9rem;
      }

      .scroll-area {
        max-height: 340px;
        overflow: auto;
        padding-right: 0.5rem;
      }

      @media (max-width: 840px) {
        .nav-links {
          display: none;
        }

        .hero-content {
          text-align: center;
        }

        .hero-badges {
          justify-content: center;
        }

        .section-heading {
          flex-direction: column;
          align-items: flex-start;
        }

        .section-heading p {
          margin-bottom: 0.5rem;
        }

        .reservation-section {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 540px) {
        main {
          padding: 2rem 1.1rem 4rem;
        }

        header.hero {
          padding: 1.8rem 1.1rem 3rem;
        }

        .hero-content h1 {
          font-size: 2.4rem;
        }

        .event-card {
          padding: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <header class="hero" id="uvod">
      <nav>
        <a class="logo" href="#uvod" aria-label="Poznej &amp; Hraj">
          <span></span>
          Poznej &amp; Hraj
        </a>
        <ul class="nav-links">
          <li><a href="#akce">Akce</a></li>
          <li><a href="#rezervace">Rezervace</a></li>
          <li><a href="#galerie">Galerie</a></li>
          <li><a href="#recenze">Recenze</a></li>
          <li><a href="#komunita">Komunita</a></li>
        </ul>
      </nav>

      <div class="hero-content">
        <div>
          <div class="badge">Seznamovac√≠ hern√≠ veƒçery</div>
          <h1>Poznej nov√© lidi, hraj legend√°rn√≠ hry, za≈æij neonovou noc.</h1>
          <p class="hero-lede">
            Poznej &amp; Hraj je platforma pro interaktivn√≠ veƒçery pln√© soutƒõ≈æ√≠, deskovek a
            neform√°ln√≠ho seznamov√°n√≠. Vyber si akci, rezervuj m√≠sto a p≈ôidej se k na≈°√≠ komunitƒõ.
          </p>
          <div class="hero-badges">
            <span class="badge">Live moder√°to≈ôi</span>
            <span class="badge">Hern√≠ turnaje</span>
            <span class="badge">Foto koutek</span>
          </div>
          <button class="primary-btn" data-scroll="#rezervace">Rezervovat m√≠sto</button>
        </div>
        <div class="glass-panel">
          <h3>Co pr√°vƒõ chyst√°me?</h3>
          <p>
            Ka≈æd√Ω mƒõs√≠c nov√Ω tematick√Ω veƒçer, speci√°ln√≠ seznamovac√≠ aktivity a kur√°torovan√° knihovna
            her. Kapacita je omezen√°, m√≠sta miz√≠ rychle!
          </p>
          <div class="chips" id="event-highlight"></div>
        </div>
      </div>
    </header>

    <main>
      <section id="akce">
        <div class="section-heading">
          <div>
            <h2>Nadch√°zej√≠c√≠ akce</h2>
            <p>Vyber si atmosf√©ru, kter√° ti sed√≠. Ka≈æd√° akce obsahuje ledolamov√© hry, t√Ωmov√© v√Ωzvy a afterparty.</p>
          </div>
          <button class="secondary-btn admin-access" id="admin-login" type="button" aria-expanded="false">
            ‚öôÔ∏è Admin p≈ô√≠stup
          </button>
        </div>
        <div class="events-grid" id="events-list"></div>
      </section>

      <section id="rezervace" class="reservation-section glass-panel">
        <div>
          <h2>Rezervace m√≠sta</h2>
          <p>
            Vypl≈à formul√°≈ô a potvrƒè √∫ƒçast. Po odesl√°n√≠ ti p≈ôijde potvrzen√≠ na e-mail. Rezervace je
            nez√°vazn√° ‚Äì platba prob√≠h√° a≈æ na m√≠stƒõ. V≈°echna data odes√≠l√°me bezpeƒçnƒõ p≈ôes Formspree.
          </p>
          <div class="status-message" id="reservation-status"></div>
        </div>
        <form id="reservation-form">
          <label>
            Vyber akci
            <select name="eventId" required id="reservation-event"></select>
          </label>
          <label>
            Tv√© jm√©no
            <input type="text" name="name" autocomplete="name" required placeholder="Alex" />
          </label>
          <label>
            Email
            <input type="email" name="email" autocomplete="email" required placeholder="alex@email.cz" />
          </label>
          <label>
            Datum
            <input type="date" name="date" required />
          </label>
          <label>
            Poƒçet m√≠st
            <input type="number" name="people" min="1" max="20" value="1" required />
          </label>
          <label>
            Vzkaz pro organiz√°tory (voliteln√©)
            <textarea name="message" placeholder="Preferovan√© hry, alergie..."></textarea>
          </label>
          <button class="primary-btn" type="submit">Odeslat rezervaci</button>
        </form>
      </section>

      <section id="galerie">
        <div class="section-heading">
          <div>
            <h2>Galerie &amp; atmosf√©ra</h2>
            <p>Mrkni, jak to u n√°s ≈æije. V≈°echny fotky najde≈° i v komunitn√≠m archivu.</p>
          </div>
          <button class="secondary-btn" type="button" id="open-gallery">Zobrazit v≈°echny</button>
        </div>
        <div class="glass-panel">
          <div class="gallery-grid" id="gallery-grid"></div>
        </div>
      </section>

      <section id="anketa" class="glass-panel">
        <div class="section-heading">
          <div>
            <h2>Hlasuj o p≈ô√≠≈°t√≠m t√©matu</h2>
            <p>Dej vƒõdƒõt, o jak√Ω veƒçer m√°≈° z√°jem. V√Ωsledky pr≈Øbƒõ≈ænƒõ sleduje cel√Ω t√Ωm.</p>
          </div>
        </div>
        <form id="poll-form">
          <div class="poll-options" id="poll-options"></div>
          <button class="primary-btn" type="submit">Odeslat hlas</button>
        </form>
        <div class="status-message" id="poll-status"></div>
      </section>

      <section id="recenze">
        <div class="section-heading">
          <div>
            <h2>Recenze komunity</h2>
            <p>Hr√°ƒçi a hr√°ƒçky sd√≠lej√≠ sv√© dojmy. P≈ôidej se i ty ‚Äì recenze ƒçekaj√≠ na schv√°len√≠ adminem.</p>
          </div>
        </div>
        <div class="reviews-grid" id="reviews-list"></div>
        <div class="glass-panel" style="margin-top: 2rem;">
          <h3>Napi≈° vlastn√≠ recenzi</h3>
          <form id="review-form">
            <label>
              Jm√©no / p≈ôezd√≠vka
              <input type="text" name="name" required placeholder="GameLover" />
            </label>
            <label>
              Hodnocen√≠
              <select name="rating" required>
                <option value="">Vyber...</option>
                <option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ ‚Äì legend√°rn√≠!</option>
                <option value="4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ ‚Äì skvƒõl√Ω veƒçer</option>
                <option value="3">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ ‚Äì fajn z√°≈æitek</option>
                <option value="2">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ ‚Äì m√° rezervy</option>
                <option value="1">‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ ‚Äì pot≈ôeba zlep≈°it</option>
              </select>
            </label>
            <label>
              Tvoje zku≈°enost
              <textarea name="text" required minlength="20" placeholder="Jak√Ω byl program, moder√°tor, atmosf√©ra..."></textarea>
            </label>
            <button class="primary-btn" type="submit">Odeslat recenzi</button>
          </form>
          <div class="status-message" id="review-status"></div>
        </div>
      </section>

      <section id="komunita" class="ig-section">
        <h2>üì∏ Oznaƒç n√°s na IG</h2>
        <p>
          Sd√≠lej z√°≈æitky z na≈°ich akc√≠! Oznaƒç n√°s na Instagramu <strong>@poznejahraj</strong> a pomoz
          roz≈°√≠≈ôit na≈°i komunitu.
        </p>
        <div class="ig-icons" aria-hidden="true">
          <span>üì∑</span>
          <span>üéâ</span>
          <span>üï∫</span>
        </div>
        <p>Najde≈° n√°s i na Facebooku. Tv√© fotky rotuj√≠ v komunitn√≠m streamu n√≠≈æe.</p>
      </section>

      <section class="photo-marquee" aria-label="Komunitn√≠ stream fotek">
        <div class="marquee-track" id="marquee-track"></div>
      </section>

      <section class="glass-panel admin-panel" id="admin-panel">
        <header class="section-heading" style="margin-bottom: 0;">
          <h2>Administrace</h2>
          <button class="secondary-btn" type="button" id="admin-logout">Odhl√°sit</button>
        </header>
        <p style="margin-top: 0;">Spravuj akce, galerii, recenze a exportuj rezervace. V≈°echna data jsou ukl√°d√°na v tv√©m prohl√≠≈æeƒçi.</p>
        <div class="admin-sections">
          <div class="glass-panel admin-group">
            <h3>Nov√° akce</h3>
            <form id="admin-event-form">
              <label>N√°zev akce<input name="title" type="text" required /></label>
              <label>Datum<input name="date" type="date" required /></label>
              <label>Kapacita<input name="capacity" type="number" min="5" max="120" required /></label>
              <label>Popis<textarea name="description" required></textarea></label>
              <label>Fotky akce (max 5)<input name="photos" type="file" accept="image/*" multiple /></label>
              <button class="primary-btn" type="submit">P≈ôidat akci</button>
            </form>
            <div class="status-message" id="admin-event-status"></div>
          </div>

          <div class="glass-panel admin-group">
            <h3>P≈ôehled rezervac√≠</h3>
            <div class="scroll-area">
              <table aria-label="Rezervace">
                <thead>
                  <tr>
                    <th>Akce</th>
                    <th>Jm√©no</th>
                    <th>Email</th>
                    <th>Datum</th>
                    <th>M√≠sta</th>
                  </tr>
                </thead>
                <tbody id="reservations-table"></tbody>
              </table>
            </div>
            <button class="secondary-btn" type="button" id="export-reservations">Export do CSV</button>
          </div>

          <div class="glass-panel admin-group">
            <h3>Schvalov√°n√≠ recenz√≠</h3>
            <div class="scroll-area" id="admin-reviews"></div>
          </div>

          <div class="glass-panel admin-group">
            <h3>Spr√°va galerie</h3>
            <form id="admin-gallery-form">
              <label>Nov√© fotky<input name="gallery" type="file" accept="image/*" multiple /></label>
              <button class="secondary-btn" type="submit">Nahr√°t do galerie</button>
            </form>
            <div class="status-message" id="admin-gallery-status"></div>
            <div class="gallery-grid" id="admin-gallery"></div>
          </div>

          <div class="glass-panel admin-group">
            <h3>V√Ωsledky ankety</h3>
            <div id="admin-poll"></div>
            <button class="secondary-btn" type="button" id="reset-poll">Resetovat anketu</button>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>¬© 2024 Poznej &amp; Hraj. V≈°echna data jsou ukl√°d√°na lok√°lnƒõ v prohl√≠≈æeƒçi.</p>
    </footer>

    <div class="modal-overlay" id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="modal">
        <header>
          <h3 id="modal-title"></h3>
          <button class="close-btn" type="button" aria-label="Zav≈ô√≠t" data-close>√ó</button>
        </header>
        <div id="modal-content"></div>
      </div>
    </div>

    <div class="lightbox" id="lightbox" role="dialog" aria-modal="true">
      <button type="button" aria-label="Zav≈ô√≠t" data-lightbox-close>√ó</button>
      <img src="" alt="N√°hled fotografie" />
    </div>
    <script>
      const STORAGE_KEYS = {
        EVENTS: "poznej-events",
        RESERVATIONS: "poznej-reservations",
        REVIEWS: "poznej-reviews",
        GALLERY: "poznej-gallery",
        POLL: "poznej-poll",
        POLL_VOTE: "poznej-poll-vote",
        ADMIN: "poznej-admin-session"
      };

      const defaultEvents = [
        {
          id: "event-neon",
          title: "Neon Speed Dating &amp; Party Games",
          date: new Date().toISOString().split("T")[0],
          capacity: 40,
          description:
            "Veƒçer pln√Ω ledolamov√Ωch her, rychl√Ωch seznamovac√≠ch kol a neonov√Ωch mini soutƒõ≈æ√≠. Moderuje dvojice Leo &amp; Nina.",
          tags: ["speed dating", "party", "nov√°ƒçci"],
          photos: [
            "https://images.unsplash.com/photo-1529158062015-cad636e69505?auto=format&fit=crop&w=900&q=80",
            "https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=900&q=80"
          ]
        },
        {
          id: "event-quest",
          title: "Quest Night: √önik z neonov√©ho labyrintu",
          date: new Date(Date.now() + 1000 * 60 * 60 * 24 * 7).toISOString().split("T")[0],
          capacity: 32,
          description:
            "T√Ωmov√° v√Ωzva inspirovan√° √∫nikovkami a kooperativn√≠mi hrami. Souboj o ƒças, logiku i humor.",
          tags: ["t√Ωmov√° hra", "mystery", "soutƒõ≈æ"],
          photos: [
            "https://images.unsplash.com/photo-1514525253161-7a46d19cd819?auto=format&fit=crop&w=900&q=80",
            "https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=900&q=80",
            "https://images.unsplash.com/photo-1530053969600-caed2596d242?auto=format&fit=crop&w=900&q=80"
          ]
        },
        {
          id: "event-board",
          title: "Board Game Mixer: Legends Tournament",
          date: new Date(Date.now() + 1000 * 60 * 60 * 24 * 14).toISOString().split("T")[0],
          capacity: 48,
          description:
            "Kur√°torovan√° hern√≠ knihovna, pr≈Øvodci, kte≈ô√≠ vysvƒõtl√≠ pravidla, a semifin√°lov√Ω turnaj v modern√≠ch deskovk√°ch.",
          tags: ["turnaj", "deskovky", "networking"],
          photos: [
            "https://images.unsplash.com/photo-1545239351-ef35f43d514b?auto=format&fit=crop&w=900&q=80",
            "https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?auto=format&fit=crop&w=900&q=80"
          ]
        }
      ];

      const defaultReviews = [
        {
          id: crypto.randomUUID(),
          name: "Petra",
          rating: 5,
          text: "Skvƒõl√Ω veƒçer! Moder√°to≈ôi n√°s dostali do hry bƒõhem p√°r minut a poznala jsem spoustu nov√Ωch lid√≠.",
          approved: true,
          createdAt: Date.now() - 1000 * 60 * 60 * 24 * 3
        },
        {
          id: crypto.randomUUID(),
          name: "Martin",
          rating: 4,
          text: "V√Ωborn√Ω mix party a deskovek. Hlavnƒõ Quest Night byl super intenzivn√≠!",
          approved: true,
          createdAt: Date.now() - 1000 * 60 * 60 * 24 * 6
        },
        {
          id: crypto.randomUUID(),
          name: "Lucka",
          rating: 5,
          text: "√ö≈æasn√° atmosf√©ra, neonov√© dekorace a fotokoutek mƒõly mega vibe. D√≠ky!",
          approved: true,
          createdAt: Date.now() - 1000 * 60 * 60 * 24 * 9
        }
      ];

      const defaultGallery = [
        "https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?auto=format&fit=crop&w=900&q=80",
        "https://images.unsplash.com/photo-1469307580733-007134b49301?auto=format&fit=crop&w=900&q=80",
        "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=900&q=80",
        "https://images.unsplash.com/photo-1523580846011-d3a5bc25702b?auto=format&fit=crop&w=900&q=80",
        "https://images.unsplash.com/photo-1461988091159-192b6df7054f?auto=format&fit=crop&w=900&q=80",
        "https://images.unsplash.com/photo-1515169067865-5387ec356754?auto=format&fit=crop&w=900&q=80"
      ];

      const defaultPoll = {
        options: [
          { id: "retro", title: "Retro neon veƒçer", description: "80's hudba, ark√°dov√© mini turnaje.", votes: 18 },
          { id: "mystery", title: "Hra o tr≈Øny: aliance &amp; intriky", description: "Roleplay, kost√Ωmy a taktika.", votes: 12 },
          { id: "mask", title: "Masky &amp; kv√≠zy", description: "Teambuilding s h√°dankami a rychl√Ωmi kv√≠zy.", votes: 9 }
        ]
      };

      const state = {
        events: [],
        reservations: [],
        reviews: [],
        gallery: [],
        poll: defaultPoll,
        isAdmin: false
      };

      const els = {
        eventsList: document.getElementById("events-list"),
        reservationForm: document.getElementById("reservation-form"),
        reservationEvent: document.getElementById("reservation-event"),
        reservationStatus: document.getElementById("reservation-status"),
        galleryGrid: document.getElementById("gallery-grid"),
        marqueeTrack: document.getElementById("marquee-track"),
        openGallery: document.getElementById("open-gallery"),
        pollOptions: document.getElementById("poll-options"),
        pollForm: document.getElementById("poll-form"),
        pollStatus: document.getElementById("poll-status"),
        reviewsList: document.getElementById("reviews-list"),
        reviewForm: document.getElementById("review-form"),
        reviewStatus: document.getElementById("review-status"),
        adminLogin: document.getElementById("admin-login"),
        adminPanel: document.getElementById("admin-panel"),
        adminLogout: document.getElementById("admin-logout"),
        adminEventForm: document.getElementById("admin-event-form"),
        adminEventStatus: document.getElementById("admin-event-status"),
        adminReviews: document.getElementById("admin-reviews"),
        adminGalleryForm: document.getElementById("admin-gallery-form"),
        adminGallery: document.getElementById("admin-gallery"),
        adminGalleryStatus: document.getElementById("admin-gallery-status"),
        reservationsTable: document.getElementById("reservations-table"),
        exportReservations: document.getElementById("export-reservations"),
        adminPoll: document.getElementById("admin-poll"),
        resetPoll: document.getElementById("reset-poll"),
        modal: document.getElementById("modal"),
        modalTitle: document.getElementById("modal-title"),
        modalContent: document.getElementById("modal-content"),
        lightbox: document.getElementById("lightbox"),
        lightboxImg: document.querySelector("#lightbox img"),
        eventHighlight: document.getElementById("event-highlight")
      };

      function loadState() {
        state.events = loadFromStorage(STORAGE_KEYS.EVENTS, defaultEvents);
        state.reservations = loadFromStorage(STORAGE_KEYS.RESERVATIONS, []);
        state.reviews = loadFromStorage(STORAGE_KEYS.REVIEWS, defaultReviews);
        state.gallery = loadFromStorage(STORAGE_KEYS.GALLERY, defaultGallery);
        state.poll = loadFromStorage(STORAGE_KEYS.POLL, defaultPoll);
        state.isAdmin = Boolean(localStorage.getItem(STORAGE_KEYS.ADMIN));
      }

      function loadFromStorage(key, fallback) {
        try {
          const item = localStorage.getItem(key);
          if (!item) {
            localStorage.setItem(key, JSON.stringify(fallback));
            return structuredClone(fallback);
          }
          return JSON.parse(item);
        } catch (error) {
          console.error("Chyba p≈ôi naƒç√≠t√°n√≠ dat", key, error);
          return structuredClone(fallback);
        }
      }

      function saveToStorage(key, value) {
        localStorage.setItem(key, JSON.stringify(value));
      }

      function formatDate(dateStr) {
        try {
          const date = new Date(dateStr + "T00:00:00");
          return date.toLocaleDateString("cs-CZ", { day: "2-digit", month: "2-digit", year: "numeric" });
        } catch (error) {
          return dateStr;
        }
      }

      function renderEvents() {
        els.eventsList.innerHTML = "";
        if (!state.events.length) {
          els.eventsList.innerHTML = '<div class="empty-state">≈Ω√°dn√© akce zat√≠m nejsou napl√°nov√°ny.</div>';
          return;
        }
        const sorted = [...state.events].sort((a, b) => new Date(a.date) - new Date(b.date));
        sorted.forEach((event) => {
          const reservedSeats = state.reservations
            .filter((reservation) => reservation.eventId === event.id)
            .reduce((total, reservation) => total + Number(reservation.people || 0), 0);
          const available = Math.max(event.capacity - reservedSeats, 0);

          const card = document.createElement("article");
          card.className = "event-card";
          card.innerHTML = `
            <h3>${event.title}</h3>
            <div class="event-meta">
              <span>üìÖ ${formatDate(event.date)}</span>
              <span class="event-availability">üí° Voln√° m√≠sta: ${available} / ${event.capacity}</span>
            </div>
            <p>${event.description}</p>
            <div class="chips">${(event.tags || [])
              .map((tag) => `<span>${tag}</span>`)
              .join("")}</div>
            <div class="event-actions">
              <button class="primary-btn" data-reserve="${event.id}">Rezervovat</button>
              ${event.photos?.length ? `<button class="secondary-btn" data-gallery="${event.id}">Zobrazit fotky</button>` : ""}
            </div>
          `;
          els.eventsList.appendChild(card);
        });

        const nextEvent = sorted[0];
        if (nextEvent) {
          els.eventHighlight.innerHTML = `
            <span>${nextEvent.title}</span>
            <span>${formatDate(nextEvent.date)}</span>
            <span>${nextEvent.tags?.slice(0, 2).join(" ‚Ä¢ ") || ""}</span>
          `;
        }
      }

      function populateReservationEvents() {
        els.reservationEvent.innerHTML = state.events
          .map((event) => `<option value="${event.id}">${event.title} (${formatDate(event.date)})</option>`)
          .join("");
      }

      function renderGallery() {
        const fragment = document.createDocumentFragment();
        const previewImages = state.gallery.slice(0, 6);
        previewImages.forEach((src, index) => {
          const item = document.createElement("button");
          item.type = "button";
          item.className = "gallery-item";
          item.setAttribute("aria-label", "Otev≈ô√≠t fotografii");
          item.innerHTML = `<img src="${src}" alt="Foto z akce ${index + 1}" loading="lazy" />`;
          item.addEventListener("click", () => openLightbox(src));
          fragment.appendChild(item);
        });
        els.galleryGrid.innerHTML = "";
        els.galleryGrid.appendChild(fragment);

        renderMarquee();
        renderAdminGallery();
      }

      function renderMarquee() {
        els.marqueeTrack.innerHTML = "";
        const trackImages = [...state.gallery, ...state.gallery];
        trackImages.forEach((src) => {
          const img = document.createElement("img");
          img.src = src;
          img.alt = "Komunitn√≠ moment";
          els.marqueeTrack.appendChild(img);
        });
      }

      function renderPoll() {
        els.pollOptions.innerHTML = "";
        const totalVotes = state.poll.options.reduce((sum, option) => sum + Number(option.votes || 0), 0);
        state.poll.options.forEach((option) => {
          const percentage = totalVotes ? Math.round((option.votes / totalVotes) * 100) : 0;
          const optionEl = document.createElement("div");
          optionEl.className = "poll-option";
          optionEl.innerHTML = `
            <label>
              <input type="radio" name="poll" value="${option.id}" required />
              <div>
                <strong>${option.title}</strong>
                <p>${option.description}</p>
              </div>
            </label>
            <div class="poll-progress"><span style="transform: scaleX(${percentage / 100});"></span></div>
            <small>${percentage}% (${option.votes} hlas≈Ø)</small>
          `;
          els.pollOptions.appendChild(optionEl);
        });
        renderAdminPoll();
      }

      function renderReviews() {
        els.reviewsList.innerHTML = "";
        const approved = state.reviews.filter((review) => review.approved);
        if (!approved.length) {
          els.reviewsList.innerHTML = '<div class="empty-state">Zat√≠m ≈æ√°dn√© schv√°len√© recenze.</div>';
          return;
        }
        const sorted = approved.sort((a, b) => b.createdAt - a.createdAt);
        sorted.forEach((review) => {
          const card = document.createElement("article");
          card.className = "review-card";
          card.innerHTML = `
            <div class="review-stars">${"‚òÖ".repeat(review.rating)}${"‚òÜ".repeat(5 - review.rating)}</div>
            <p>${review.text}</p>
            <div class="review-meta">
              <span>${review.name}</span>
              <span>${new Date(review.createdAt).toLocaleDateString("cs-CZ")}</span>
            </div>
          `;
          els.reviewsList.appendChild(card);
        });
        renderAdminReviews();
      }

      function renderAdminReviews() {
        if (!state.isAdmin) return;
        els.adminReviews.innerHTML = "";
        const pending = state.reviews.filter((review) => !review.approved);
        if (!pending.length) {
          els.adminReviews.innerHTML = '<div class="empty-state">≈Ω√°dn√© recenze ke schv√°len√≠.</div>';
          return;
        }
        pending.forEach((review) => {
          const wrapper = document.createElement("div");
          wrapper.className = "review-card";
          wrapper.innerHTML = `
            <strong>${review.name}</strong>
            <div class="review-stars">${"‚òÖ".repeat(review.rating)}${"‚òÜ".repeat(5 - review.rating)}</div>
            <p>${review.text}</p>
            <div class="event-actions">
              <button class="primary-btn" data-approve="${review.id}">Schv√°lit</button>
              <button class="secondary-btn" data-delete-review="${review.id}">Smazat</button>
            </div>
          `;
          els.adminReviews.appendChild(wrapper);
        });
      }

      function renderAdminGallery() {
        if (!state.isAdmin) return;
        els.adminGallery.innerHTML = "";
        if (!state.gallery.length) {
          els.adminGallery.innerHTML = '<div class="empty-state">Galerie je pr√°zdn√°.</div>';
          return;
        }
        state.gallery.forEach((src, index) => {
          const item = document.createElement("div");
          item.className = "gallery-item";
          item.innerHTML = `<img src="${src}" alt="Galerie ${index + 1}" loading="lazy" /><button class="secondary-btn" data-remove-gallery="${index}" type="button" style="position:absolute;bottom:0.5rem;right:0.5rem;">‚úï</button>`;
          item.querySelector("img").addEventListener("click", () => openLightbox(src));
          els.adminGallery.appendChild(item);
        });
      }

      function renderReservationsTable() {
        if (!state.isAdmin) return;
        els.reservationsTable.innerHTML = "";
        if (!state.reservations.length) {
          els.reservationsTable.innerHTML = '<tr><td colspan="5">≈Ω√°dn√© rezervace zat√≠m nep≈ôi≈°ly.</td></tr>';
          return;
        }
        state.reservations
          .slice()
          .reverse()
          .forEach((reservation) => {
            const row = document.createElement("tr");
            const eventTitle = state.events.find((event) => event.id === reservation.eventId)?.title || "";
            row.innerHTML = `
              <td>${eventTitle}</td>
              <td>${reservation.name}</td>
              <td>${reservation.email}</td>
              <td>${formatDate(reservation.date)}</td>
              <td>${reservation.people}</td>
            `;
            els.reservationsTable.appendChild(row);
          });
      }

      function renderAdminPoll() {
        if (!state.isAdmin) return;
        const totalVotes = state.poll.options.reduce((sum, option) => sum + Number(option.votes || 0), 0);
        els.adminPoll.innerHTML = state.poll.options
          .map((option) => {
            const percent = totalVotes ? Math.round((option.votes / totalVotes) * 100) : 0;
            return `<p><strong>${option.title}</strong>: ${option.votes} hlas≈Ø (${percent}%)</p>`;
          })
          .join("");
      }

      function openModal(title, content) {
        els.modalTitle.textContent = title;
        if (typeof content === "string") {
          els.modalContent.innerHTML = content;
        } else {
          els.modalContent.innerHTML = "";
          els.modalContent.appendChild(content);
        }
        els.modal.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function closeModal() {
        els.modal.classList.remove("active");
        els.modalContent.innerHTML = "";
        document.body.style.overflow = "";
      }

      function openLightbox(src) {
        els.lightboxImg.src = src;
        els.lightbox.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function closeLightbox() {
        els.lightbox.classList.remove("active");
        els.lightboxImg.src = "";
        document.body.style.overflow = "";
      }

      function showStatus(element, message, type = "success") {
        element.textContent = message;
        element.classList.remove("success", "error");
        if (type === "success") {
          element.classList.add("success");
        } else {
          element.classList.add("error");
        }
      }

      function hideStatus(element) {
        element.classList.remove("success", "error");
        element.textContent = "";
      }

      function setAdminMode(enabled) {
        state.isAdmin = enabled;
        if (enabled) {
          els.adminPanel.classList.add("active");
          els.adminLogin.setAttribute("aria-expanded", "true");
          localStorage.setItem(STORAGE_KEYS.ADMIN, "1");
          renderAdminReviews();
          renderAdminGallery();
          renderReservationsTable();
          renderAdminPoll();
        } else {
          els.adminPanel.classList.remove("active");
          els.adminLogin.setAttribute("aria-expanded", "false");
          localStorage.removeItem(STORAGE_KEYS.ADMIN);
        }
      }

      function readFilesAsDataUrls(fileList, limit = Infinity) {
        const files = Array.from(fileList || []).slice(0, limit);
        if (!files.length) return Promise.resolve([]);
        return Promise.all(
          files.map(
            (file) =>
              new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
              })
          )
        );
      }

      function downloadCSV(filename, rows) {
        const csvContent = rows
          .map((row) => row.map((cell) => `"${String(cell).replace(/"/g, '""')}"`).join(";"))
          .join("\n");
        const blob = new Blob(["\ufeff" + csvContent], { type: "text/csv;charset=utf-8;" });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      }

      function handleReservationSubmit(event) {
        event.preventDefault();
        hideStatus(els.reservationStatus);
        const formData = new FormData(els.reservationForm);
        const payload = Object.fromEntries(formData.entries());
        const reservation = {
          id: crypto.randomUUID(),
          ...payload,
          people: Number(payload.people),
          createdAt: Date.now()
        };

        fetch("https://formspree.io/f/xovyawqv", {
          method: "POST",
          headers: { Accept: "application/json" },
          body: formData
        })
          .then((response) => {
            if (!response.ok) throw new Error("Rezervaci se nepoda≈ôilo odeslat. Zkus to pros√≠m znovu.");
            state.reservations.push(reservation);
            saveToStorage(STORAGE_KEYS.RESERVATIONS, state.reservations);
            renderEvents();
            if (state.isAdmin) renderReservationsTable();
            els.reservationForm.reset();
            populateReservationEvents();
            showStatus(els.reservationStatus, "D√≠ky! Rezervace byla odesl√°na a potvrzen√≠ doraz√≠ na e-mail.");
          })
          .catch((error) => {
            console.error(error);
            showStatus(els.reservationStatus, error.message || "Nƒõco se pokazilo.", "error");
          });
      }

      function handleReviewSubmit(event) {
        event.preventDefault();
        hideStatus(els.reviewStatus);
        const formData = new FormData(els.reviewForm);
        const payload = Object.fromEntries(formData.entries());
        const review = {
          id: crypto.randomUUID(),
          name: payload.name.trim(),
          rating: Number(payload.rating),
          text: payload.text.trim(),
          approved: false,
          createdAt: Date.now()
        };
        state.reviews.push(review);
        saveToStorage(STORAGE_KEYS.REVIEWS, state.reviews);
        els.reviewForm.reset();
        showStatus(els.reviewStatus, "Dƒõkujeme! Recenze byla odesl√°na a ƒçek√° na schv√°len√≠.");
        if (state.isAdmin) renderAdminReviews();
      }

      function handlePollSubmit(event) {
        event.preventDefault();
        hideStatus(els.pollStatus);
        if (localStorage.getItem(STORAGE_KEYS.POLL_VOTE)) {
          showStatus(els.pollStatus, "Hlas u≈æ byl zaznamen√°n. Dƒõkujeme!", "error");
          return;
        }
        const formData = new FormData(els.pollForm);
        const choice = formData.get("poll");
        const option = state.poll.options.find((item) => item.id === choice);
        if (!option) return;
        option.votes += 1;
        saveToStorage(STORAGE_KEYS.POLL, state.poll);
        localStorage.setItem(STORAGE_KEYS.POLL_VOTE, choice);
        showStatus(els.pollStatus, "Dƒõkujeme za hlas! V√Ωsledky pr≈Øbƒõ≈ænƒõ aktualizujeme.");
        els.pollForm.reset();
        renderPoll();
      }

      function handleAdminEventSubmit(event) {
        event.preventDefault();
        hideStatus(els.adminEventStatus);
        const formData = new FormData(els.adminEventForm);
        const payload = Object.fromEntries(formData.entries());
        readFilesAsDataUrls(formData.getAll("photos"), 5)
          .then((photos) => {
            const newEvent = {
              id: `event-${crypto.randomUUID()}`,
              title: payload.title.trim(),
              date: payload.date,
              capacity: Number(payload.capacity),
              description: payload.description.trim(),
              tags: ["custom", "komunita"],
              photos
            };
            state.events.push(newEvent);
            saveToStorage(STORAGE_KEYS.EVENTS, state.events);
            renderEvents();
            populateReservationEvents();
            els.adminEventForm.reset();
            showStatus(els.adminEventStatus, "Nov√° akce byla p≈ôid√°na.");
          })
          .catch(() => {
            showStatus(els.adminEventStatus, "Nepoda≈ôilo se naƒç√≠st fotky.", "error");
          });
      }

      function handleAdminGallerySubmit(event) {
        event.preventDefault();
        hideStatus(els.adminGalleryStatus);
        const files = new FormData(els.adminGalleryForm).getAll("gallery");
        if (!files.length || (files.length === 1 && files[0].size === 0)) {
          showStatus(els.adminGalleryStatus, "Vyber pros√≠m alespo≈à jednu fotku.", "error");
          return;
        }
        readFilesAsDataUrls(files)
          .then((images) => {
            if (!images.length) return;
            state.gallery = [...images, ...state.gallery];
            saveToStorage(STORAGE_KEYS.GALLERY, state.gallery);
            els.adminGalleryForm.reset();
            renderGallery();
            showStatus(els.adminGalleryStatus, "Fotky byly p≈ôid√°ny do galerie.");
          })
          .catch((error) => {
            console.error(error);
            showStatus(els.adminGalleryStatus, "Nahr√°v√°n√≠ fotek selhalo.", "error");
          });
      }

      function handleAdminReviewActions(event) {
        const approveId = event.target.dataset.approve;
        const deleteId = event.target.dataset.deleteReview;
        if (approveId) {
          const review = state.reviews.find((item) => item.id === approveId);
          if (review) {
            review.approved = true;
            saveToStorage(STORAGE_KEYS.REVIEWS, state.reviews);
            renderReviews();
          }
        }
        if (deleteId) {
          state.reviews = state.reviews.filter((item) => item.id !== deleteId);
          saveToStorage(STORAGE_KEYS.REVIEWS, state.reviews);
          renderReviews();
        }
      }

      function handleAdminGalleryClick(event) {
        const removeIndex = event.target.dataset.removeGallery;
        if (removeIndex !== undefined) {
          state.gallery.splice(Number(removeIndex), 1);
          saveToStorage(STORAGE_KEYS.GALLERY, state.gallery);
          renderGallery();
        }
      }

      function handleEventListClick(event) {
        const reserveId = event.target.dataset.reserve;
        const galleryId = event.target.dataset.gallery;
        if (reserveId) {
          els.reservationEvent.value = reserveId;
          document.querySelector('[data-scroll="#rezervace"]').click();
        }
        if (galleryId) {
          const eventData = state.events.find((item) => item.id === galleryId);
          if (!eventData) return;
          if (!eventData.photos?.length) {
            showStatus(els.reservationStatus, "Tato akce zat√≠m nem√° fotky.", "error");
            return;
          }
          const container = document.createElement("div");
          container.className = "gallery-grid";
          eventData.photos.forEach((src, index) => {
            const btn = document.createElement("button");
            btn.type = "button";
            btn.className = "gallery-item";
            btn.innerHTML = `<img src="${src}" alt="Foto ${eventData.title} ${index + 1}" />`;
            btn.addEventListener("click", () => openLightbox(src));
            container.appendChild(btn);
          });
          openModal(eventData.title, container);
        }
      }

      function handleGalleryOpen() {
        const container = document.createElement("div");
        container.className = "gallery-grid";
        state.gallery.forEach((src, index) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "gallery-item";
          btn.innerHTML = `<img src="${src}" alt="Komunitn√≠ foto ${index + 1}" />`;
          btn.addEventListener("click", () => openLightbox(src));
          container.appendChild(btn);
        });
        openModal("Komunitn√≠ galerie", container);
      }

      function handleExportReservations() {
        if (!state.reservations.length) return;
        const rows = [["Akce", "Jm√©no", "Email", "Datum", "M√≠sta"]];
        state.reservations.forEach((reservation) => {
          const eventTitle = state.events.find((event) => event.id === reservation.eventId)?.title || "";
          rows.push([
            eventTitle,
            reservation.name,
            reservation.email,
            formatDate(reservation.date),
            reservation.people
          ]);
        });
        downloadCSV(`rezervace-${new Date().toISOString().split("T")[0]}.csv`, rows);
      }

      function handleResetPoll() {
        if (!confirm("Opravdu chce≈° resetovat anketu?")) return;
        state.poll = structuredClone(defaultPoll);
        saveToStorage(STORAGE_KEYS.POLL, state.poll);
        localStorage.removeItem(STORAGE_KEYS.POLL_VOTE);
        renderPoll();
        showStatus(els.pollStatus, "Anketa byla restartov√°na. Hlasuj znovu!", "success");
      }

      function setupScrolling() {
        document.querySelectorAll('[data-scroll]').forEach((button) => {
          button.addEventListener("click", () => {
            const target = document.querySelector(button.dataset.scroll);
            if (target) target.scrollIntoView({ behavior: "smooth" });
          });
        });
      }

      function bindEvents() {
        els.reservationForm.addEventListener("submit", handleReservationSubmit);
        els.reviewForm.addEventListener("submit", handleReviewSubmit);
        els.pollForm.addEventListener("submit", handlePollSubmit);
        els.eventsList.addEventListener("click", handleEventListClick);
        els.openGallery.addEventListener("click", handleGalleryOpen);
        els.lightbox.addEventListener("click", (event) => {
          if (event.target.dataset.lightboxClose !== undefined || event.target === els.lightbox) {
            closeLightbox();
          }
        });
        els.modal.addEventListener("click", (event) => {
          if (event.target.dataset.close !== undefined || event.target === els.modal) {
            closeModal();
          }
        });
        els.adminLogin.addEventListener("click", () => {
          const password = prompt("Zadej heslo pro admin sekci:");
          if (password === "akce1234") {
            setAdminMode(true);
          } else if (password) {
            alert("Nespr√°vn√© heslo.");
          }
        });
        els.adminLogout.addEventListener("click", () => setAdminMode(false));
        els.adminEventForm.addEventListener("submit", handleAdminEventSubmit);
        els.adminGalleryForm.addEventListener("submit", handleAdminGallerySubmit);
        els.adminReviews.addEventListener("click", handleAdminReviewActions);
        els.adminGallery.addEventListener("click", handleAdminGalleryClick);
        els.exportReservations.addEventListener("click", handleExportReservations);
        els.resetPoll.addEventListener("click", handleResetPoll);
      }

      function init() {
        loadState();
        renderEvents();
        populateReservationEvents();
        renderGallery();
        renderPoll();
        renderReviews();
        if (state.isAdmin) setAdminMode(true);
        setupScrolling();
        bindEvents();
      }

      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
